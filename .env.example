# Geetanjali Configuration
# Copy this file to .env and update with your values
#
# This single .env file is used by:
# - Docker Compose (all services)
# - Backend (Python/FastAPI) - via pydantic-settings
# - Frontend (React/Vite) - VITE_* variables only

# ============================================================================
# QUICK START - Choose your LLM mode:
# ============================================================================
#
# 1. MOCK MODE (Recommended for UI development - no API costs):
#    USE_MOCK_LLM=true
#    OLLAMA_ENABLED=false
#
# 2. ANTHROPIC MODE (Production - requires API key):
#    USE_MOCK_LLM=false
#    LLM_PROVIDER=anthropic
#    ANTHROPIC_API_KEY=your_actual_api_key
#    OLLAMA_ENABLED=false
#
# 3. OLLAMA MODE (Local LLM - requires Ollama running):
#    USE_MOCK_LLM=false
#    LLM_PROVIDER=ollama
#    OLLAMA_ENABLED=true
#
# 4. HYBRID MODE (Anthropic primary, Ollama fallback):
#    USE_MOCK_LLM=false
#    LLM_PROVIDER=anthropic
#    LLM_FALLBACK_ENABLED=true
#    ANTHROPIC_API_KEY=your_actual_api_key
#    OLLAMA_ENABLED=true
# ============================================================================

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
POSTGRES_DB=geetanjali
POSTGRES_USER=geetanjali
POSTGRES_PASSWORD=geetanjali_dev_pass
# For local dev (non-Docker): use localhost
# For Docker: handled automatically via docker-compose
DATABASE_URL=postgresql://geetanjali:geetanjali_dev_pass@localhost:5432/geetanjali

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
LLM_PROVIDER=anthropic
LLM_FALLBACK_ENABLED=true
USE_MOCK_LLM=true

# ============================================================================
# ANTHROPIC (Claude)
# Get API key from https://console.anthropic.com/
# ============================================================================
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-5-haiku-20241022
ANTHROPIC_MAX_TOKENS=2048
ANTHROPIC_TIMEOUT=30

# ============================================================================
# OLLAMA (Local LLM)
# ============================================================================
OLLAMA_ENABLED=false
# For local dev: http://localhost:11434
# For Docker: http://host.docker.internal:11434
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:3b
OLLAMA_TIMEOUT=120
OLLAMA_MAX_TOKENS=512

# ============================================================================
# VECTOR DATABASE (ChromaDB)
# ============================================================================
CHROMA_HOST=
CHROMA_PORT=8000
CHROMA_PERSIST_DIRECTORY=./chroma_data
CHROMA_COLLECTION_NAME=gita_verses

# ============================================================================
# RAG PIPELINE
# ============================================================================
RAG_TOP_K_VERSES=5
RAG_TOP_M_COMMENTARIES=3
RAG_CONFIDENCE_THRESHOLD=0.7
RAG_SCHOLAR_REVIEW_THRESHOLD=0.6

# ============================================================================
# APPLICATION
# ============================================================================
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# ============================================================================
# API SETTINGS
# ============================================================================
API_V1_PREFIX=/api/v1
CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:5173,http://127.0.0.1,http://127.0.0.1:3000,http://127.0.0.1:5173
ANALYZE_RATE_LIMIT=10/hour

# ============================================================================
# AUTHENTICATION / JWT
# ============================================================================
# IMPORTANT: Generate secure keys for production:
#   python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET=dev-secret-key-change-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080
REFRESH_TOKEN_EXPIRE_DAYS=90

# Cookie security - set to true in production (requires HTTPS)
COOKIE_SECURE=false

# ============================================================================
# ADMIN API KEY
# ============================================================================
# Required for admin endpoints (ingest, sync-featured)
# Generate a secure key: python -c "import secrets; print(secrets.token_hex(32))"
API_KEY=dev-api-key-12345

# ============================================================================
# EMBEDDINGS
# ============================================================================
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384

# ============================================================================
# FRONTEND (Vite - only VITE_* variables are exposed to browser)
# ============================================================================
# For local dev: http://localhost:8000
# For production: https://api.yourdomain.com
VITE_API_URL=http://localhost:8000
VITE_API_V1_PREFIX=/api/v1
